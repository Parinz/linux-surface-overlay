"use strict";(self.webpackChunksurface_gentoo_docs=self.webpackChunksurface_gentoo_docs||[]).push([[359],{581:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return c},default:function(){return p}});var n=o(2122),r=o(9756),l=(o(7294),o(3905)),a=["components"],i={sidebar_position:5},s="Bootloader Configuration",u={unversionedId:"Installing-Gentoo/4",id:"Installing-Gentoo/4",isDocsHomePage:!1,title:"Bootloader Configuration",description:"For this chapter of the Handbook, you can solely follow this guide you are reading.",source:"@site/docs/Installing-Gentoo/4.md",sourceDirName:"Installing-Gentoo",slug:"/Installing-Gentoo/4",permalink:"/linux-surface-overlay/docs/Installing-Gentoo/4",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/Installing-Gentoo/4.md",version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Configuring the System & Installing System Tools",permalink:"/linux-surface-overlay/docs/Installing-Gentoo/3"},next:{title:"Congratulations!",permalink:"/linux-surface-overlay/docs/Installing-Gentoo/congratulations"}},c=[{value:"Check your EFI directory",id:"check-your-efi-directory",children:[]},{value:"Reboot",id:"reboot",children:[]}],d={toc:c};function p(e){var t=e.components,o=(0,r.Z)(e,a);return(0,l.kt)("wrapper",(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"bootloader-configuration"},"Bootloader Configuration"),(0,l.kt)("p",null,"For this chapter of the Handbook, you can solely follow this guide you are reading."),(0,l.kt)("p",null,"Firstly, we tell portage that we are using a UEFI device:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"echo 'GRUB_PLATFORMS=\"efi-64\"' >> /etc/portage/make.conf\n")),(0,l.kt)("p",null,"Then we emerge GRUB:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"emerge --ask sys-boot/grub:2\n")),(0,l.kt)("h2",{id:"check-your-efi-directory"},"Check your EFI directory"),(0,l.kt)("p",null,"The efi-directory is where the vfat partition that you created is mounted."),(0,l.kt)("p",null,"If you are unsure of your EFI directory, then you can do ",(0,l.kt)("inlineCode",{parentName:"p"},"lsblk"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"lsblk\n")),(0,l.kt)("p",null,"This lists the disk drives and there mount points, you should see where your first disk is mounted. (",(0,l.kt)("inlineCode",{parentName:"p"},"nvem0n1p1"),") Use that path for the following grub command."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"grub-install --target=x86_64-efi --efi-directory=/boot\n")),(0,l.kt)("p",null,"Finally, we can configure the grub boot loader:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"grub-mkconfig -o /boot/grub/grub.cfg\n")),(0,l.kt)("h2",{id:"reboot"},"Reboot"),(0,l.kt)("p",null,"Now exit the chroot"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"exit\n")),(0,l.kt)("p",null,"Unmount the things:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"cd\numount -l /mnt/gentoo/dev{/shm,/pts,}\numount -R /mnt/gentoo\n")),(0,l.kt)("p",null,"Cross your fingers and reboot:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"reboot\n")))}p.isMDXComponent=!0}}]);